#kernel library

- alias: [assign, def]

- def: [print,
    do: [[],
        __print: [$args]
    ]
]

- def: [puts,
    do: [[],
        print: [$args, "\n"]
    ]
]

- def: [array,
    do: [[],
        $args
    ]
]

#escapes lambda
- def: [next,
    do: [[next_value],
        meta_context: [[$next_value],
            do: [[],
                assign: [next_value, $it]
            ]
        ]
    ]
]

#for class system
- alias: [def, class]
- alias: [reassign, override]

- def: 
    - new
    - do:
        - [klass]
        - assign: [new_args, tail: [$args]]
        - assign: [context, boot: [$klass]]
        - context: $new_args
        - $context

- def: [mdef,
    do: [[name, lambda],
        meta_context: [[$name, $lambda],
            do: [[name, lambda],
                def: [$name, boot: [$lambda] ]
            ]
        ]
    ]
]

- def: [extends,
    do: [[klass],
        meta_context: [[], $klass]
    ]
]